<% layout('layouts/boilerplate.ejs') %>
<div class="grid-wrapper">
    <div class="row">
        <div class="glide">
            <div class="glide__track" data-glide-el="track">
                <ul class="glide__slides">
                    <% restaurant.images.forEach((img, i)=> { %>
                    <li class="glide__slide"><img src="<%= img.url %> " alt="<%= img.filename %>"></li>
                    <% }) %>
                </ul>
            </div>
            <div class="glide__bullets" data-glide-el="controls[nav]">
                <% restaurant.images.forEach((img, i) => { %> 
                <button class="glide__bullet" data-glide-dir="=<%= i %>"></button>
                <% }) %> 
            </div>
            <div class="glide__arrows" data-glide-el="controls">
                <button class="glide__arrow glide__arrow--left" data-glide-dir="<"><</button>
                <button class="glide__arrow glide__arrow--right" data-glide-dir=">">></button>
            </div>
        </div>
        <div class="show__card">
            <h3>
                <%= restaurant.name %>
            </h3>
            <h4>
                <%= `${restaurant.address.street} ${restaurant.address.houseNumber}, ${restaurant.address.city}` %>
            </h4>
            <h4>
                <%= restaurant.cuisine %>
            </h4>
            <h4>
                <%= restaurant.priceRange %>
            </h4>
            <p>
                <%= restaurant.description %>
            </p>
            <p>Submitted by: <%= restaurant.author.username %>
            </p>
            <form action="/restaurants/<%= restaurant.id %>?_method=DELETE" method="POST">
                <button>Delete Restaurant</button>
            </form>
        </div>
    </div>
    <div class="row">
        <div id="showMap"></div>
        
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.5.0/glide.js"
    integrity="sha512-BDOdVHygzrUniS5DJvYBzAHyw5WQRdeVfHSaQmufCfV5s6OFnprcxMsEOAs26Bx6eTGpmlFo4owWiPpr3Voc0w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    new Glide('.glide').mount()
</script>
<script>
    const mapboxToken = '<%- process.env.MAPBOX_TOKEN %>'
    const restaurant = <%- JSON.stringify(restaurant) %>;
</script>
<script src="/javascripts/utilities/showMap.js"></script>
